{"version":3,"file":"777.bundle.js","mappings":"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","sources":["webpack://discount_today/./src/constants/baseData.constant.ts","webpack://discount_today/./src/contexts/BaseProvider.tsx","webpack://discount_today/./src/layout/DefaultLayout.tsx"],"sourcesContent":["const ALL_OPTION = { name: 'Összes', id: 'all' };\nconst INITIAL_BASE_DATA = {\n    cities: ['Összes'],\n    offers: [],\n    storeTypes: [ALL_OPTION],\n    storeGroups: [ALL_OPTION],\n};\nconst INITIAL_OFFER_CONDITIONS = {\n    city: \"all\",\n    storeGroup: \"all\",\n    storeType: \"all\",\n};\nexport { ALL_OPTION, INITIAL_BASE_DATA, INITIAL_OFFER_CONDITIONS };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createContext, useEffect, useState } from \"react\";\nimport { axiosPublic } from \"../api/axios\";\nimport apiURL from \"../constants/apiUrl.constant\";\nimport { INITIAL_BASE_DATA, INITIAL_OFFER_CONDITIONS } from \"../constants/baseData.constant\";\nconst BaseContext = createContext({\n    baseData: INITIAL_BASE_DATA,\n    error: null,\n    fetchOffers: () => { },\n    isLoadingBaseData: false\n});\nconst getBaseData = (endpoint) => __awaiter(void 0, void 0, void 0, function* () {\n    const response = yield axiosPublic.get(endpoint, {\n    //withCredentials: true\n    });\n    return response.data;\n});\nconst getOffers = (conditions) => __awaiter(void 0, void 0, void 0, function* () {\n    const data = {\n        city: conditions.city === 'Összes' ? 'all' : conditions.city,\n        store_group: conditions.storeGroup,\n        store_type: conditions.storeType,\n    };\n    const response = yield axiosPublic.post(apiURL.offers, JSON.stringify(data), {\n        headers: {\n            'Content-Type': 'application/json',\n            // withCredentials: true,\n        }\n    });\n    console.log('response: ', response);\n    return response.data;\n});\nexport const BaseProvider = ({ children }) => {\n    const [baseData, setBaseData] = useState(INITIAL_BASE_DATA);\n    const [error, setError] = useState(null);\n    const [isLoadingBaseData, setIsLoadingBaseData] = useState(false);\n    const fetchOffers = (conditions) => __awaiter(void 0, void 0, void 0, function* () {\n        const offers = yield getOffers(conditions);\n        setBaseData((data) => (Object.assign(Object.assign({}, data), { offers })));\n    });\n    const getAllBaseData = () => {\n        setIsLoadingBaseData(true);\n        const allPromise = Promise.all([getBaseData(apiURL.storeTypes), getBaseData(apiURL.storeGroups), getBaseData(apiURL.cities), getOffers(INITIAL_OFFER_CONDITIONS)]);\n        allPromise\n            .then(responseData => {\n            console.info('responseData: ', responseData);\n            setBaseData({\n                storeTypes: [...INITIAL_BASE_DATA.storeTypes, ...responseData[0]],\n                storeGroups: [...INITIAL_BASE_DATA.storeGroups, ...responseData[1]],\n                cities: [...INITIAL_BASE_DATA.cities, ...responseData[2]],\n                offers: responseData[3]\n            });\n            setIsLoadingBaseData(false);\n        })\n            .catch(err => {\n            console.error(err);\n            setIsLoadingBaseData(false);\n            setError(err);\n        });\n    };\n    useEffect(() => {\n        getAllBaseData();\n    }, []);\n    return (_jsx(BaseContext.Provider, Object.assign({ value: { baseData, error, fetchOffers, isLoadingBaseData } }, { children: children })));\n};\nexport default BaseContext;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useState } from \"react\";\nimport { Outlet } from \"react-router-dom\";\nimport { Navigation, ModalsContainer } from \"../components\";\nimport { ModalEnum } from \"../interfaces\";\nimport { BaseProvider } from \"../contexts\";\nconst INITIAL_MODALS_VISIBILITY = {\n    [ModalEnum.login]: false,\n    [ModalEnum.userData]: false,\n    [ModalEnum.preferences]: false,\n    [ModalEnum.registration]: false,\n};\nconst DefaultLayout = () => {\n    const [sidebarVisible, setSidebarVisible] = useState(false);\n    const [modalsVisibility, setModalsVisibility] = useState(INITIAL_MODALS_VISIBILITY);\n    const closeModal = useCallback(() => setModalsVisibility(INITIAL_MODALS_VISIBILITY), []);\n    const toggleSidebar = (state) => {\n        if (typeof state === 'boolean') {\n            setSidebarVisible(state);\n            return;\n        }\n        setSidebarVisible(!sidebarVisible);\n    };\n    const openModal = useCallback((modalType) => {\n        setModalsVisibility(Object.assign(Object.assign({}, INITIAL_MODALS_VISIBILITY), { [modalType]: true }));\n    }, []);\n    return (\n    // <AuthProvider>\n    _jsxs(BaseProvider, { children: [_jsxs(\"div\", Object.assign({ className: \"wrapper d-flex flex-column min-vh-100 bg-light\" }, { children: [_jsx(Navigation, { openModal: openModal, toggleSidebar: toggleSidebar }), _jsx(Outlet, { context: { openModal, sidebarVisible } })] })), _jsx(ModalsContainer, { modalsVisibility: modalsVisibility, closeModal: closeModal })] })\n    // </AuthProvider>\n    );\n};\nexport default DefaultLayout;\n"],"names":["ALL_OPTION","name","id","INITIAL_BASE_DATA","cities","offers","storeTypes","storeGroups","INITIAL_OFFER_CONDITIONS","city","storeGroup","storeType","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","BaseContext","createContext","baseData","error","fetchOffers","isLoadingBaseData","getBaseData","endpoint","axios","data","getOffers","conditions","store_group","store_type","response","JSON","stringify","headers","console","log","BaseProvider","children","setBaseData","useState","setError","setIsLoadingBaseData","useEffect","all","responseData","info","catch","err","Provider","Object","assign","INITIAL_MODALS_VISIBILITY","sidebarVisible","setSidebarVisible","modalsVisibility","setModalsVisibility","closeModal","useCallback","openModal","modalType","className","toggleSidebar","state","context"],"sourceRoot":""}